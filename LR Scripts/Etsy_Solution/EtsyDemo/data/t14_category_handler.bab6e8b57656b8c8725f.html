(window["jsonp-common-entrypoints"]=window["jsonp-common-entrypoints"]||[]).push([["auto/category-nav/v2/category_handler","auto/@etsy-modules/CategoryNav/NavHandlers/Overlay"],{"+s1y":function(t,e,a){t.exports=a("VYFw")("+s1y")},"68KA":function(t,e,a){"use strict";a.r(e);a.d(e,"Overlay",(function(){return r}));var i=a("w1yB");function n(t,e,a){e in t?Object.defineProperty(t,e,{value:a,enumerable:true,configurable:true,writable:true}):t[e]=a;return t}const o={OVERLAY_OPEN:"overlay-open",OVERLAY_CLOSE:"overlay-close"};const s={HEADER_WRAPPER:"[data-selector='header-cat-nav-wrapper']"};class r{constructor(t,e){n(this,"container",void 0);n(this,"overlay",void 0);n(this,"activeTriggers",void 0);this.container=t;this.overlay=e;this.activeTriggers=[];this.bindEventListeners();this.openOverlay=this.openOverlay.bind(this);this.closeOverlay=this.closeOverlay.bind(this)}bindEventListeners(){this.container.addEventListener(o.OVERLAY_OPEN,(t=>{t instanceof CustomEvent&&this.openOverlay(t)}));this.container.addEventListener(o.OVERLAY_CLOSE,(t=>{t instanceof CustomEvent&&this.closeOverlay(t)}));this.overlay.addEventListener("click",(()=>{this.activeTriggers=[];this.overlay.classList.remove("wt-overlay--will-animate");this.overlay.setAttribute("aria-hidden","true")}))}openOverlay(t){var e;const a=null===(e=t.detail)||void 0===e?void 0:e.target;if("undefined"!==typeof a&&null!==a){const t=this.activeTriggers.indexOf(a);-1===t&&this.activeTriggers.push(a);if(this.overlay){this.overlay.classList.add("wt-overlay--will-animate");this.overlay.setAttribute("aria-hidden","false")}}}closeOverlay(t){var e;const a=null===(e=t.detail)||void 0===e?void 0:e.target;const i=this.activeTriggers.indexOf(a);if("undefined"!==typeof a&&null!==a){-1!==i&&this.activeTriggers.splice(i,1);if(0===this.activeTriggers.length&&this.overlay){this.overlay.classList.remove("wt-overlay--will-animate");this.overlay.setAttribute("aria-hidden","true")}}}static dispatchOpenBackgroundOverlayIfEligible(t){if(i["default"].getBoolean("has_dropdown_background_overlay",false)&&t instanceof HTMLElement){var e;const a=new CustomEvent(o.OVERLAY_OPEN,{detail:{target:t}});null===(e=document.querySelector(s.HEADER_WRAPPER))||void 0===e?void 0:e.dispatchEvent(a)}}static dispatchCloseBackgroundOverlayIfEligible(t){if(i["default"].getBoolean("has_dropdown_background_overlay",false)&&t instanceof HTMLElement){var e;const a=new CustomEvent(o.OVERLAY_CLOSE,{detail:{target:t}});null===(e=document.querySelector(s.HEADER_WRAPPER))||void 0===e?void 0:e.dispatchEvent(a)}}}},E1kl:function(t,e,a){"use strict";var i=a("3a3M");var n=a.n(i);var o=a("V9r9");e["a"]={setMenuKeyboardNavigation(t,e){const a=e||[];function i(e){const a=e.attr("id");t.attr("aria-activedescendant",a);e.trigger("focus")}if(!t.length)return;if("menu"!==t.attr("role"))throw new Error(`${t} must have a role set to "menu".`);const s=t.find('[role="menuitem"]').filter(":not(:disabled)").filter(":not(:hidden)");t.off("keydown.a11yMenuFocus");t.on("keydown.a11yMenuFocus",(t=>{if(t.keyCode===o["default"].UP||t.keyCode===o["default"].DOWN){t.preventDefault();const e=n()(document.activeElement);const a=s.index(e);if(t.keyCode===o["default"].UP){if(0===a){i(s.eq(s.length-1));return}i(s.eq(a-1))}if(t.keyCode===o["default"].DOWN){if(a===s.length-1){i(s.first());return}i(s.eq(a+1))}}if(t.keyCode===o["default"].ENTER||t.keyCode===o["default"].SPACE){t.preventDefault();n()(t.target).trigger("menu-item-activate",[t])}t.keyCode===o["default"].RIGHT&&n()(t.target).trigger("menu-item-open-submenu",[t]);if(t.keyCode===o["default"].LEFT||t.keyCode===o["default"].ESC||a.shiftTabTriggersLeave&&t.shiftKey&&t.keyCode===o["default"].TAB){t.preventDefault();n()(t.target).trigger("menu-item-leave",[t])}}))}}},OHqh:function(t,e,a){t.exports=a("VYFw")("OHqh")},TVrR:function(t,e,a){t.exports=a("VYFw")("TVrR")},Tou5:function(t,e,a){"use strict";var i=a("3a3M");var n=a.n(i);var o=a("V9r9");e["a"]={setMenubarKeyboardNavigation(t){function e(e){const a=e.attr("id");t.attr("aria-activedescendant",a);e.trigger("focus")}if("menubar"!==t.attr("role"))throw new Error(`${t} must have a role set to "menubar".`);const a=t.find('[role="menuitem"]').filter(":not(:disabled)").filter(":not(:hidden)");t.off("keydown.a11yMenubarFocus");t.on("keydown.a11yMenubarFocus",(t=>{if(t.keyCode===o["default"].RIGHT||t.keyCode===o["default"].LEFT){t.preventDefault();const i=n()(document.activeElement);const s=a.index(i);if(t.keyCode===o["default"].LEFT){if(0===s){e(a.eq(a.length-1));return}e(a.eq(s-1))}if(t.keyCode===o["default"].RIGHT){if(s===a.length-1){e(a.first());return}e(a.eq(s+1))}}if(t.keyCode===o["default"].ENTER||t.keyCode===o["default"].SPACE||t.keyCode===o["default"].DOWN){t.preventDefault();n()(t.target).trigger("menubar-item-press")}}))}}},V9r9:function(t,e,a){t.exports=a("VYFw")("V9r9")},Z2Mz:function(t,e,a){t.exports=a("VYFw")("Z2Mz")},"k3/0":function(t,e,a){"use strict";a.r(e);a.d(e,"CategoryHandler",(function(){return A}));var i=a("3a3M");var n=a.n(i);var o=a("vBnV");var s=a.n(o);var r=a("Tou5");var c=a("V9r9");var d=a("E1kl");var v=a("H3fw");var u=a("Z2Mz");var l=a("+s1y");var h=a("uEZf");var m=a("w1yB");var f=a("68KA");function N(t,e,a){e in t?Object.defineProperty(t,e,{value:a,enumerable:true,configurable:true,writable:true}):t[e]=a;return t}const g={TOP_NAV_CATEGORY_LIST:'[data-ui="top-nav-category-list"]',TOP_NAV_CATEGORY_LINK:'[data-ui="top-nav-category-link"]',TOP_NAV_PROMO_LINK:'[data-ui="top-nav-promo-link"]',ONSALE_LINK:'[data-ui="desktop-catnav-onsale-link"]',PROMO:'[data-ui="promo"]',SUB_NAV:'[data-ui="sub-nav"]',SIDE_NAV_CATEGORY_LIST:'[data-ui="side-nav-category-list"]',SIDE_NAV_CATEGORY_LINK:'[data-ui="side-nav-category-link"]',TERTIARY_NAV:'[data-ui="tertiary-nav"]',TERTIARY_NAV_PROMO_LINK:'[data-ui="tertiary-nav-promo-link"]',MENUITEM:'[role="menuitem"]',MENU:'[role="menu"]',ACTIVE_NAV_ITEM_INDICATOR:'[data-ui="active-nav-item-indicator"]',OVERLAY:'[data-ui="overlay"]',HEADER_WRAPPER:"[data-selector='header-cat-nav-wrapper']"};const E={DISPLAY_NONE:"wt-display-none"};const _={MOUSE_LEAVE_TIMEOUT:400,MOUSE_ENTER_TIMEOUT:350,MOUSE_ENTER_DROPDOWN_DELAY:200};class A{constructor(t){N(this,"$context",void 0);N(this,"$topNavCategoryList",void 0);N(this,"$navCategoryLinks",void 0);N(this,"$navPromoLinks",void 0);N(this,"allNavLinks",void 0);N(this,"storedNavItemPositionAndWidthInfo",void 0);N(this,"$sideNavCategoryList",void 0);N(this,"$sideNavCategoryLinks",void 0);N(this,"$tertiaryNavs",void 0);N(this,"$searchResults",void 0);N(this,"$promos",void 0);N(this,"$activeNavItemIndicator",void 0);N(this,"mouseEnterNavItemTimeout",void 0);N(this,"leaveNavTimeout",void 0);N(this,"overlay",void 0);N(this,"hasDropdownBackgroundOverlay",void 0);N(this,"headerWrapper",void 0);this.$context=t;this.$topNavCategoryList=this.$context.find(g.TOP_NAV_CATEGORY_LIST);this.$navCategoryLinks=this.$context.find(g.TOP_NAV_CATEGORY_LINK);this.$navPromoLinks=this.$context.find(g.TOP_NAV_PROMO_LINK);this.allNavLinks=this.getAllNavLinks();this.storedNavItemPositionAndWidthInfo=this.setStoredNavItemPositionAndWidthInfo();this.$sideNavCategoryList=this.$context.find(g.SIDE_NAV_CATEGORY_LIST);this.$sideNavCategoryLinks=this.$context.find(g.SIDE_NAV_CATEGORY_LINK);this.$tertiaryNavs=this.$context.find(g.TERTIARY_NAV);this.$searchResults=n()(".gnav-search-inner").find("[data-id='search-suggestions']");this.$promos=this.$context.find(g.PROMO);this.$activeNavItemIndicator=this.$context.find(g.ACTIVE_NAV_ITEM_INDICATOR);this.mouseEnterNavItemTimeout=null;this.leaveNavTimeout=null;this.hasDropdownBackgroundOverlay=m["default"].getBoolean("has_dropdown_background_overlay",false);this.overlay=n()(g.OVERLAY);this.headerWrapper=document.querySelector(g.HEADER_WRAPPER);this.bindEvents();h["default"].setup(this.$context)}bindEvents(){this.$context.on("mouseenter",g.SUB_NAV,this.onMouseEnterNav.bind(this)).on("mouseenter",g.TOP_NAV_CATEGORY_LIST,this.onMouseEnterNav.bind(this)).on("mouseenter",g.SUB_NAV,this.clearMouseEnterNavItem.bind(this)).on("mouseenter click",g.TOP_NAV_CATEGORY_LINK,this.onMouseEnterNavItem.bind(this)).on("click",g.ONSALE_LINK,(()=>{v["default"].logEvent({event_name:"desktop_nav_onsale_click"})})).on("mouseleave",g.SUB_NAV,this.onMouseLeaveNav.bind(this)).on("mouseleave",g.TOP_NAV_CATEGORY_LIST,this.onMouseLeaveNav.bind(this)).on("mouseenter",g.TOP_NAV_PROMO_LINK,this.onMouseEnterPromoItem.bind(this)).on("click",g.TOP_NAV_PROMO_LINK,(t=>{const e=n()(t.currentTarget).data("eventName");v["default"].logEvent({event_name:"nav_promo_click",promo_name:e})})).on("mouseleave",g.TOP_NAV_PROMO_LINK,this.onMouseLeaveNav.bind(this)).on("click",g.TERTIARY_NAV_PROMO_LINK,(t=>{const e=n()(t.currentTarget).data("nodeId");v["default"].logEvent({event_name:"tertiary_nav_promo_click",node_id:e})})).on("click",g.SIDE_NAV_CATEGORY_LINK,this.onMouseClickSideNavItem.bind(this)).on("mouseenter",g.SIDE_NAV_CATEGORY_LINK,(t=>{const e=n()(t.currentTarget);const a=e.data("node-id");v["default"].logEvent({event_name:"desktop-nav-side-menu-hover",node_id:a})})).on("mouseenter",g.TOP_NAV_CATEGORY_LINK,(t=>{const e=n()(t.currentTarget);const a=e.data("node-id");v["default"].logEvent({event_name:"desktop-nav-top-hover",node_id:a})})).on("mouseenter",g.TOP_NAV_PROMO_LINK,(t=>{const e=n()(t.currentTarget);const a=e.data("event-name");v["default"].logEvent({event_name:`desktop-nav-top-hover-${a}`})}));this.$sideNavCategoryList.menuAim({activate:this.onMouseEnterSideNavItem.bind(this),deactivate:n.a.noop,submenuSelector:"li"});this.setA11yInitialStateMenubar().bindA11yEvents().bindA11yEventsSideNav().bindA11yEventsTertiaryNav().bindGetNavItemInfoOnWindowResize()}bindNavClickLogEvents(t,e){const a=n()(t.currentTarget).data("linkable");a?v["default"].logEvent({event_name:"top_nav_linkable_onclick",node_id:e}):v["default"].logEvent({event_name:"top_nav_not_linkable_onclick",node_id:e})}onMouseEnterNav(){this.clearLeaveNavTimeout()}onMouseEnterNavItem(t){const e=n()(t.currentTarget);const a=e.data("node-id");const i=this.hasActiveTopNavLink()?_.MOUSE_ENTER_DROPDOWN_DELAY:_.MOUSE_ENTER_TIMEOUT;this.clearMouseEnterNavItem();this.$searchResults.hide();"click"===t.type&&this.bindNavClickLogEvents(t,a);this.mouseEnterNavItemTimeout=window.setTimeout((()=>{this.makeActiveNavItem(e).hide(g.SUB_NAV).show(g.SUB_NAV+this.getDataAttributeString(a)).activateSubNav(a,false)}),i)}onKeyActivateTopNavItem(t){const e=t.data("node-id");const a=g.SUB_NAV+this.getDataAttributeString(e);this.clearMouseEnterNavItem().makeActiveNavItem(t).hide(g.SUB_NAV).show(a).activateSubNav(e,true)}activateSubNav(t,e){let a=g.SUB_NAV+this.getDataAttributeString(t);const i=this.getFirstFocusableChildForSelector(`${a} ${g.SIDE_NAV_CATEGORY_LINK}`).parent("li");if(i.length){this.makeSideNavItemActive(i).setAriaActiveDescendant(`${a} ${g.SIDE_NAV_CATEGORY_LIST}`,i.attr("id"));e&&this.setMenuKeyboardNavigation(`${a} ${g.SIDE_NAV_CATEGORY_LIST}`).getFirstFocusableChildForSelector(`${a} ${g.SIDE_NAV_CATEGORY_LIST}`).trigger("focus")}else{a=g.TERTIARY_NAV+this.getDataAttributeString(t);this.show(a);e&&this.setMenuKeyboardNavigation(a).getFirstFocusableChildForSelector(a).trigger("focus")}return this}onMouseEnterPromoItem(t){this.clearLeaveNavTimeout().makeActiveNavItem(n()(t.currentTarget)).clearMouseEnterNavItem().hide(g.SUB_NAV)}onMouseLeaveNav(){this.clearLeaveNavTimeout().clearMouseEnterNavItem();this.leaveNavTimeout=window.setTimeout((()=>{this.shrinkActiveNavItemIndicator();this.clearActiveNavItems().hide(g.SUB_NAV)}),_.MOUSE_LEAVE_TIMEOUT)}onMouseEnterSideNavItem(t){this.clearMouseEnterNavItem().makeSideNavItemActive(n()(t))}onMouseClickSideNavItem(t){const e=n()(t.currentTarget);this.clearMouseEnterNavItem().makeSideNavItemActive(e)}bindGetNavItemInfoOnWindowResize(){window.addEventListener("resize",Object(l["default"])((()=>{this.storedNavItemPositionAndWidthInfo=this.setStoredNavItemPositionAndWidthInfo()}),200))}clearLeaveNavTimeout(){if(this.leaveNavTimeout){window.clearTimeout(this.leaveNavTimeout);this.leaveNavTimeout=null}return this}clearMouseEnterNavItem(){if(this.mouseEnterNavItemTimeout){window.clearTimeout(this.mouseEnterNavItemTimeout);this.mouseEnterNavItemTimeout=null}return this}getAllNavLinks(){return Array.from(this.$navCategoryLinks).concat(Array.from(this.$navPromoLinks)).map((t=>n()(t)))}setStoredNavItemPositionAndWidthInfo(){return this.allNavLinks.map((t=>({data:t.data(),width:t.width(),position:t.position()})))}getStoredNavItemPositionAndWidthInfo(t){return this.storedNavItemPositionAndWidthInfo.find((e=>e.data===(null===t||void 0===t?void 0:t.data())))}getDataAttributeString(t){return`[data-node-id="${t}"]`}hasActiveTopNavLink(){return this.$navCategoryLinks.filter(".active").length>0||this.$navPromoLinks.filter(".active").length>0}getActiveTopNavLink(){return this.allNavLinks.find((t=>n()(t).hasClass("active")))}getFirstFocusableChildForSelector(t){return this.$context.find(`${t} ${g.MENUITEM}`).first()}makeSideNavItemActive(t){Math.random()<.01&&u["default"].increment("nav.category.open.sub_category");const e=t.data("node-id");if("A"===t.children().first().get(0).tagName)return this;this.clearActiveSideNavItems();t.addClass("active");this.hide(g.TERTIARY_NAV).show(g.TERTIARY_NAV+this.getDataAttributeString(e)).setMenuKeyboardNavigation(g.TERTIARY_NAV+this.getDataAttributeString(e));return this}makeActiveNavItem(t){Math.random()<.01&&u["default"].increment("nav.category.open.top_category");this.makeActiveNavItemIndicator(t);return this}makeActiveNavItemIndicator(t){const e=this.getStoredNavItemPositionAndWidthInfo(t)||{width:0,position:{left:0,top:0}};const a=e.width;const i=e.position;if(this.hasActiveTopNavLink()){this.clearActiveNavItems();t.addClass("active");this.$activeNavItemIndicator.addClass("animate-all").css("left",i.left).css("width",a)}else{t.addClass("active");const e=i.left+.5*a;this.$activeNavItemIndicator.css("left",e).css("width",a)}}shrinkActiveNavItemIndicator(){const t=this.getActiveTopNavLink();const e=this.getStoredNavItemPositionAndWidthInfo(t);if(!e)return;{const t=e.width;const a=e.position;const i=a.left+.5*t;this.$activeNavItemIndicator.css("left",i).removeClass("animate-all").css("width",0)}}clearActiveNavItems(){this.$navCategoryLinks.removeClass("active");this.$navPromoLinks.removeClass("active");return this}clearActiveSideNavItems(){this.$sideNavCategoryLinks.removeClass("active");return this}show(t){this.headerWrapper instanceof HTMLElement&&f["Overlay"].dispatchOpenBackgroundOverlayIfEligible(this.headerWrapper);n()(t).removeClass(E.DISPLAY_NONE).attr("aria-hidden","false");return this}hide(t){this.headerWrapper instanceof HTMLElement&&f["Overlay"].dispatchCloseBackgroundOverlayIfEligible(this.headerWrapper);n()(t).addClass(E.DISPLAY_NONE).attr("aria-hidden","true");return this}focus(t){this.$context.find(`${t} ${g.MENUITEM}`).trigger("focus");return this}onTabAway(){this.clearLeaveNavTimeout().clearMouseEnterNavItem().clearActiveNavItems().hide(g.SUB_NAV)}setAriaActiveDescendant(t,e){this.$context.find(t).parent("ul").attr("aria-activedescendant",e);return this}setMenuKeyboardNavigation(t){d["a"].setMenuKeyboardNavigation(this.$context.find(t),{shiftTabTriggersLeave:true});return this}setA11yInitialStateMenubar(){const t=this.$navCategoryLinks.find(g.MENUITEM);const e=t.first();e.attr("tabindex","0");this.$topNavCategoryList.attr("aria-activedescendant",e.attr("id"));return this}bindA11yEvents(){if(!this.$topNavCategoryList||this.$topNavCategoryList.length<1)return this;r["a"].setMenubarKeyboardNavigation(this.$topNavCategoryList);this.$context.on("keydown.catnav",(t=>{this.$searchResults.hide();t.keyCode!==c["default"].TAB||t.shiftKey||this.onTabAway()}));this.$topNavCategoryList.on("menubar-item-press",g.MENUITEM,(t=>{const e=n()(t.currentTarget);if("true"===e.attr("aria-haspopup")){const t=e.closest('[data-ui="top-nav-category-link"]');this.onKeyActivateTopNavItem(t)}else e.attr("href")&&"#"!==e.attr("href")&&window.location.assign(e.attr("href"))}));return this}bindA11yEventsSideNav(){this.$sideNavCategoryList.on("menu-item-open-submenu menu-item-activate",g.MENUITEM,(t=>{const e=n()(t.target);if("true"===e.attr("aria-haspopup")){const t=e.parent("li");const a=t.data("node-id");this.makeSideNavItemActive(t).getFirstFocusableChildForSelector(g.TERTIARY_NAV+this.getDataAttributeString(a)).trigger("focus")}else"menu-item-activate"===t.type&&e.attr("href")&&"#"!==e.attr("href")&&window.location.assign(e.attr("href"))}));this.$sideNavCategoryList.on("menu-item-leave",g.MENUITEM,(t=>{const e=n()(t.target);const a=e.parents("ul").data("node-id");this.hide(g.SUB_NAV).clearActiveNavItems().focus(g.TOP_NAV_CATEGORY_LINK+this.getDataAttributeString(a))}));return this}bindA11yEventsTertiaryNav(){this.$tertiaryNavs.on("menu-item-leave",g.MENUITEM,(t=>{const e=n()(t.target);const a=e.parents(g.TERTIARY_NAV);const i=a.data("node-id");const o=a.attr("data-has-side-nav");if("false"===o){this.hide(g.SUB_NAV).clearActiveNavItems().focus(g.TOP_NAV_CATEGORY_LINK+this.getDataAttributeString(i));return}this.focus(g.SIDE_NAV_CATEGORY_LINK+this.getDataAttributeString(i))}));this.$tertiaryNavs.on("menu-item-activate",g.MENUITEM,(t=>{window.location.assign(n()(t.target).attr("href"))}));this.$tertiaryNavs.on("menu-item-open-submenu menu-item-activate",g.MENUITEM,(t=>{const e=n()(t.target);const a=e.closest(g.MENU);const i=a.siblings(g.PROMO);i.find('[role="menuitem"]').eq(0).trigger("focus")}));this.$promos.on("keyup",(t=>{const e=n()(t.target);if(t.keyCode===c["default"].LEFT||t.shiftKey&&t.keyCode===c["default"].TAB){t.preventDefault();const a=e.closest(g.PROMO);const i=a.siblings(g.TERTIARY_NAV).filter(":not(:hidden)");i.find('[role="menuitem"]').eq(0).trigger("focus")}else if(t.keyCode===c["default"].ESC){t.preventDefault();const a=e.closest(g.SUB_NAV).data("node-id");this.hide(g.SUB_NAV).clearActiveNavItems().focus(g.TOP_NAV_CATEGORY_LINK+this.getDataAttributeString(a))}else if(t.keyCode===c["default"].DOWN){const t=this.$promos.find("button");t.length>0&&t.parent("a").eq(0).trigger("focus")}else if(t.keyCode===c["default"].UP){const t=e.closest(g.PROMO);t.find("a").eq(0).trigger("focus")}}));return this}}},uEZf:function(t,e,a){"use strict";a.r(e);var i=a("3a3M");var n=a.n(i);var o=a("H3fw");var s=a("w1yB");var r=a("TVrR");var c=a("Z2Mz");function d(t,e,a){e in t?Object.defineProperty(t,e,{value:a,enumerable:true,configurable:true,writable:true}):t[e]=a;return t}class v{constructor(t){d(this,"eventCallback",void 0);d(this,"batches",void 0);this.eventCallback=t;this.batches={}}addNewBatch(t,e,a,i,n){this.batches[t]={totalItems:n,targetBatchSize:i,eventData:a,eventName:e,currBatchCount:0,itemsSeenCount:0}}clearBatch(t){const e=this.batches[t];if(void 0!==e){e.eventData={};e.currBatchCount=0}}addToBatch(t,e){const a=this.batches[t];if(a){const t=Object.keys(a.eventData).length>0?a.eventData:e.common||{};const i=e.view||{};Object.keys(i).forEach((e=>{const a=i[e];if(t[e]){var n;null===(n=t[e])||void 0===n?void 0:n.push(a)}else t[e]=[a]}));a.eventData=t;a.currBatchCount++;a.itemsSeenCount++}}shouldClearBatch(t){const e=this.batches[t];if(e)return e.currBatchCount===e.targetBatchSize||e.itemsSeenCount===e.totalItems;return false}logAndClearBatch(t){const e=this.batches[t];if(e){this.eventCallback(e.eventName,e.eventData);this.clearBatch(t)}}handleBatchItem(t,e,a){const{total_items:i,key:n,size:o}=t;this.batches[n]||this.addNewBatch(n,e,a.common||{},o,i);this.addToBatch(n,a);this.shouldClearBatch(n)&&this.logAndClearBatch(n)}}var u=v;var l=a("OHqh");const h=function(t,e){let a;if("recommendations_module"===e["rec_event_name"]){a=`${e["rec_event_name"]}_seen`;c["default"].increment(`neu.appears_logger.recommendations_module_seen.${e["module_placement"]}`,.1)}else a=`${t}_seen`;o["default"].logEvent(n.a.extend({event_name:a},e))};const m=new u(h);const f=function(t){const e=n()(t).data("logger-id");const a=e?s["default"].getString(`${e}.component_name`):n()(t).data("appears-component-name");if(a){let i=e?JSON.parse(s["default"].getString(`${e}.event_data`)):n()(t).data("appears-event-data");if(i&&i.common&&i.common.skip_logging)return;const o=n()(t).data("appears-batch-options")||false;if(o){m.handleBatchItem(o,a,i);return}n.a.isPlainObject(i)||(i={});const r=n()(t).data("appears-log-breakpoint");r&&(i["browser_breakpoint"]=l["default"].getCurrentBreakpoint());h(a,i)}else c["default"].increment("neu.appears_logger.unknown_component")};const N={setup(t){const e="[data-appears-component-name], [data-logger-id]";const a=t?t.find(e):n()(e);a.each(((t,e)=>{const a=e.querySelectorAll(":scope > :not(.appears-ready)");a.forEach((t=>{Object(r["default"])(t,(()=>{f(e)}),{threshold:n()(e).data("offset")||.5})}))})).children().addClass("appears-ready")}};var g=e["default"]=N},vBnV:function(t,e,a){var i,n;!(i=[a("3a3M")],n=function(t){(function(t){t.fn.menuAim=function(t){this.each((function(){e.call(this,t)}));return this};function e(e){var a=t(this),i=null,n=[],o=null,s=null,r=t.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:t.noop,exit:t.noop,activate:t.noop,deactivate:t.noop,exitMenu:t.noop},e);var c=3,d=300;var v=function(t){n.push({x:t.pageX,y:t.pageY});n.length>c&&n.shift()};var u=function(){s&&clearTimeout(s);if(r.exitMenu(this)){i&&r.deactivate(i);i=null}};var l=function(){s&&clearTimeout(s);r.enter(this);N(this)},h=function(){r.exit(this)};var m=function(){f(this)};var f=function(t){if(t==i)return;i&&r.deactivate(i);r.activate(t);i=t};var N=function(t){var e=g();e?s=setTimeout((function(){N(t)}),e):f(t)};var g=function(){if(!i||!t(i).is(r.submenuSelector))return 0;var e=a.offset(),s={x:e.left,y:e.top-r.tolerance},c={x:e.left+a.outerWidth(),y:s.y},v={x:e.left,y:e.top+a.outerHeight()+r.tolerance},u={x:e.left+a.outerWidth(),y:v.y},l=n[n.length-1],h=n[0];if(!l)return 0;h||(h=l);if(h.x<e.left||h.x>u.x||h.y<e.top||h.y>u.y)return 0;if(o&&l.x==o.x&&l.y==o.y)return 0;function m(t,e){return(e.y-t.y)/(e.x-t.x)}var f=c,N=u;if("left"==r.submenuDirection){f=v;N=s}else if("below"==r.submenuDirection){f=u;N=v}else if("above"==r.submenuDirection){f=s;N=c}var g=m(l,f),E=m(l,N),_=m(h,f),A=m(h,N);if(g<_&&E>A){o=l;return d}o=null;return 0};a.on("mouseleave",u).find(r.rowSelector).on("mouseenter",l).on("mouseleave",h).on("click",m);t(document).on("mousemove",v)}})(t);return t}.apply(e,i),void 0!==n&&(t.exports=n))}}]);
//# sourceMappingURL=https://www.etsy.com/sourcemaps/evergreenVendor/en-GB/async/common-entrypoints/auto/category-nav/v2/category_handler.bab6e8b57656b8c8725f.js.map